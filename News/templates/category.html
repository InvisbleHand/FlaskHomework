{% extends "layout.html" %} {% block title %}{{ category.name }} - 分类浏览{%
endblock %} {% block content %}
<div class="mb-4 pb-3 border-bottom">
  <div class="d-flex align-items-end justify-content-between">
    <div>
      <span
        class="text-uppercase text-primary fw-bold small"
        style="letter-spacing: 1px"
        >Category</span
      >
      <h1 class="fw-bold mb-0 mt-1 text-dark">{{ category.name }}</h1>
    </div>
    <div class="text-end">
      <span class="badge bg-light text-dark border rounded-pill px-3">
        共 {{ news_list|length }} 篇
      </span>
    </div>
  </div>
</div>

{% if news_list %}
<div class="row g-4">
  {% for news in news_list %}
  <div class="col-md-6 col-lg-4">
    <a
      href="{{ url_for('article', news_id=news.id) }}"
      class="text-decoration-none text-reset h-100 d-block"
    >
      <article class="news-card h-100 d-flex flex-column">
        <div class="img-wrapper overflow-hidden rounded-3 mb-3">
          {% if news.cover_image %}
          <img
            src="{{ url_for('static', filename=news.cover_image) }}"
            class="w-100 object-fit-cover"
            alt="{{ news.title }}"
            style="height: 220px; transition: transform 0.5s ease"
          />
          {% else %}
          <div
            class="bg-light d-flex align-items-center justify-content-center"
            style="height: 220px"
          >
            <i class="bi bi-card-image text-muted fs-1"></i>
          </div>
          {% endif %}
        </div>

        <div class="card-content flex-grow-1">
          <div class="text-muted small mb-2">
            {{ news.created_date.strftime('%Y-%m-%d') }}
          </div>
          <h3 class="h5 fw-bold mb-2 title-hover">{{ news.title }}</h3>
          <p class="text-muted small line-clamp-3 mb-0">
            {{ news.content[:100] }}{% if news.content|length > 100 %}...{%
            endif %}
          </p>
        </div>
      </article>
    </a>
  </div>
  {% endfor %}
</div>

<style>
  .news-card:hover .img-wrapper img {
    transform: scale(1.05);
  }
  .news-card:hover .title-hover {
    color: var(--accent-color);
  }
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>

{% else %}
<div class="text-center py-5">
  <div class="mb-3">
    <i class="bi bi-journal-x text-muted" style="font-size: 3rem"></i>
  </div>
  <p class="text-muted">该分类下暂无文章。</p>
</div>
{% endif %} {% endblock %}
